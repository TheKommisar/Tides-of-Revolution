add_namespace = PHI

# Democratic Protests
country_event {
    id = PHI.1
    title = PHI.1.t
    desc = PHI.1.d
    picture = report_event_iww_demonstration

    fire_only_once = yes

    mean_time_to_happen = {
        days = 1
    }

    trigger = {
        original_tag = PHI
        date > 1936.2.20
        OR = {
            has_government = authoritarian_democrat
            has_government = paternal_autocrat
            has_government = national_populist
            has_government = valkist
        }
    }

    option = {
        name = PHI.1.a
        custom_effect_tooltip = PHI_new_elections_called
        set_country_flag = PHI_RETURN_OF_DEMOCRACY
        hidden_effect = {
            add_stability = 0.1
            add_war_support = 0.2
        }
    }
    option = {
        name = PHI.1.b
        PHI = { country_event = { id = PHI.3 } }
        ai_chance = { factor = 0 }
        custom_effect_tooltip = PHI_new_elections_suppressed
    }
}

# New Elections
country_event = {
    id = PHI.2
    title = PHI.2.t
    desc = PHI.2.d
    picture = GFX_report_event_election_vote

    fire_only_once = yes

    mean_time_to_happen = {
        days = 1
    }

    trigger = {
        original_tag = PHI
        date > 1936.3.10
        has_country_flag = PHI_RETURN_OF_DEMOCRACY
        OR = {
            has_government = authoritarian_democrat
            has_government = paternal_autocrat
            has_government = national_populist
            has_government = valkist
        }
    }

    option = {
        name = PHI.2.a

        set_politics = {
            ruling_party = social_liberal
            elections_allowed = no
        }

        hidden_effect = {
            set_popularities = {
                vanguardist = 8
                collectivist = 12
                libertarian_socialist = 7
                social_democrat = 13
                social_liberal = 31
                market_liberal = 12
                social_conservative = 17
            }
            
            set_country_flag = PHI_election_liberal_victory

            swap_ideas = {
                remove_idea = PHI_Basilio_J_Valdez_HoG_ADE
                add_idea = PHI_Sergio_Osmena_HoG_SLI
            }

            swap_ideas = {
                remove_idea = PHI_Ferdinand_Marcos_FOR_SCO
                add_idea = PHI_Joaquin_Elizalde_FOR_SLI
            }

            swap_ideas = {
                remove_idea = PHI_Serafin_Fausto_ECO_SCO
                add_idea = PHI_Antonio_de_las_Alas_ECO_SLI
            }

            swap_ideas = {
                remove_idea = PHI_Benigno_Aquino_Sr_SEC_ADE
                add_idea = PHI_Alberto_Ramos_SEC_SLI
            }
            
        }
        remove_ideas = PHI_thirst_for_democracy
    }

    option = {
        name = PHI.2.b

        set_politics = {
            ruling_party = social_democrat
            elections_allowed = no
        }

        hidden_effect = {
            set_popularities = {
                vanguardist = 4
                collectivist = 11
                libertarian_socialist = 5
                social_democrat = 29
                social_liberal = 14
                market_liberal = 9
                social_conservative = 18
                authoritarian_democrat = 10
            }
            
            set_country_flag = PHI_election_soc_dem_victory

            swap_ideas = {
                remove_idea = PHI_Basilio_J_Valdez_HoG_ADE
                add_idea = PHI_Juan_Sumulong_HoG_SDE
            }

            swap_ideas = {
                remove_idea = PHI_Ferdinand_Marcos_FOR_SCO
                add_idea = PHI_Rafael_Liwanag_HoG_SDE
            }

            swap_ideas = {
                remove_idea = PHI_Serafin_Fausto_ECO_SCO
                add_idea = PHI_Diosdado_P_Macapagal_ECO_SDE
            }

            swap_ideas = {
                remove_idea = PHI_Benigno_Aquino_Sr_SEC_ADE
                add_idea = PHI_Jose_M_Crisol_SEC_SDE
            }
        }

        remove_ideas = PHI_thirst_for_democracy
    }

    option = {
        name = PHI.2.c

        ai_chance = {
            factor = 2000
        }

        set_politics = {
            ruling_party = social_conservative
            elections_allowed = no
        }

        hidden_effect = {
            set_popularities = {
                vanguardist = 5
                collectivist = 12
                libertarian_socialist = 6
                social_democrat = 14
                social_liberal = 19
                market_liberal = 12
                social_conservative = 32
            }
            
            set_country_flag = PHI_election_conservative_victory

            swap_ideas = {
                remove_idea = PHI_Basilio_J_Valdez_HoG_ADE
                add_idea = PHI_Manuel_Quezon_HoG_SCO
            }

            add_ideas = PHI_Ferdinand_Marcos_FOR_SCO
            add_ideas = PHI_Serafin_Fausto_ECO_SCO 

            swap_ideas = {
                remove_idea = PHI_Benigno_Aquino_Sr_SEC_ADE
                add_idea = PHI_Tirano_Craveza_SEC_SCO
            }
        }

        remove_ideas = PHI_thirst_for_democracy
    }
}

# Stabitity and Order
country_event = {
    id = PHI.3
    title = PHI.3.t
    desc = PHI.3.d
    picture = GFX_report_event_german_troops_paris

    is_triggered_only = yes

    option = {
        name = PHI.3.a
        hidden_effect = {
            set_country_flag = PHI_DEMOCRATIC_OPPOSITION_EXECUTED
            set_popularities = {
                social_conservative = 5
                authoritarian_democrat = 60
                paternal_autocrat = 15
                national_populist = 20
            }
        }
        
        custom_effect_tooltip = PHI_opposition_executed
    }

    option = {
        name = PHI.3.b
        hidden_effect = {
            set_country_flag = PHI_DEMOCRATIC_OPPOSITION_JAILED
            set_popularities = {
                social_democrat = 17
                social_liberal = 24
                market_liberal = 22
                social_conservative = 30
                authoritarian_democrat = 8
            }
            PHI = { country_event = { id = PHI.33 days = 7 } }
        }

        custom_effect_tooltip = PHI_opposition_jailed
    }
}

# Seek Foreign Investments
country_event = {
    id = PHI.4
    title = PHI.4.t
    desc = PHI.4.d
    picture = GFX_report_event_hitler_handshake

    is_triggered_only = yes

    option = {
        name = PHI.4.a

        PHI = { 
            hidden_effect = {
                add_opinion_modifier = {
                    target = ROOT
                    modifier = accepted_economic_investment
                } 
            }
            random_owned_controlled_state = {
                limit = {
                    free_building_slots = {
                        building = industrial_complex
                        size > 0
                        include_locked = yes
                    }
                }

                add_extra_state_shared_building_slots = 1
                add_building_construction = {
                    type = industrial_complex
                    level = 1
                    instant_build = yes
                }
            }
        }
        if = {
            limit = { tag = USA }
            PHI = { country_event = { id = PHI.5 } }
        }
        if = {
            limit = { tag = ENG }
            PHI = { country_event = { id = PHI.6 } }
        }
        if = {
            limit = { tag = GER }
            PHI = { country_event = { id = PHI.7 } }
        }
        if = {
            limit = { tag = FRA }
            PHI = { country_event = { id = PHI.8 } }
        }
        if = {
            limit = { tag = ITA }
            PHI = { country_event = { id = PHI.9 } }
        }
        if = {
            limit = { tag = JAP }
            PHI = { country_event = { id = PHI.10 } }
        }
    }
    option = {
        name = PHI.4.b

        ai_chance = {
            factor = 0
        }

        PHI = {
            hidden_effect = {
                add_opinion_modifier = {
                    target = ROOT
                    modifier = refused_economic_investment
                }
            }
        }
        if = {
            limit = { tag = USA }
            PHI = { country_event = { id = PHI.11 } }
        }
        if = {
            limit = { tag = ENG }
            PHI = { country_event = { id = PHI.12 } }
        }
        if = {
            limit = { tag = GER }
            PHI = { country_event = { id = PHI.13 } }
        }
        if = {
            limit = { tag = FRA }
            PHI = { country_event = { id = PHI.14 } }
        }
        if = {
            limit = { tag = ITA }
            PHI = { country_event = { id = PHI.15 } }
        }
        if = {
            limit = { tag = JAP }
            PHI = { country_event = { id = PHI.16 } }
        }
    }
}

country_event = {
    id = PHI.5
    title = PHI.5.t
    desc = PHI.5.d
    picture = GFX_report_event_hitler_handshake

    is_triggered_only = yes

    option = {
        name = PHI.5.a
    }
}

country_event = {
    id = PHI.6
    title = PHI.6.t
    desc = PHI.6.d
    picture = GFX_report_event_hitler_handshake

    is_triggered_only = yes

    option = {
        name = PHI.6.a
    }
}

country_event = {
    id = PHI.7
    title = PHI.7.t
    desc = PHI.7.d
    picture = GFX_report_event_hitler_handshake

    is_triggered_only = yes

    option = {
        name = PHI.7.a
    }
}

country_event = {
    id = PHI.8
    title = PHI.8.t
    desc = PHI.8.d
    picture = GFX_report_event_hitler_handshake

    is_triggered_only = yes

    option = {
        name = PHI.8.a
    }
}

country_event = {
    id = PHI.9
    title = PHI.9.t
    desc = PHI.9.d
    picture = GFX_report_event_hitler_handshake

    is_triggered_only = yes

    option = {
        name = PHI.9.a
    }
}

country_event = {
    id = PHI.10
    title = PHI.10.t
    desc = PHI.10.d
    picture = GFX_report_event_hitler_handshake

    is_triggered_only = yes

    option = {
        name = PHI.10.a
    }
}

country_event = {
    id = PHI.11
    title = PHI.11.t
    desc = PHI.11.d
    picture = GFX_report_event_hitler_handshake

    is_triggered_only = yes

    option = {
        name = PHI.11.a
    }
}

country_event = {
    id = PHI.12
    title = PHI.12.t
    desc = PHI.12.d
    picture = GFX_report_event_hitler_handshake

    is_triggered_only = yes

    option = {
        name = PHI.12.a
    }
}

country_event = {
    id = PHI.13
    title = PHI.13.t
    desc = PHI.13.d
    picture = GFX_report_event_hitler_handshake

    is_triggered_only = yes

    option = {
        name = PHI.13.a
    }
}
country_event = {
    id = PHI.14
    title = PHI.14.t
    desc = PHI.14.d
    picture = GFX_report_event_hitler_handshake

    is_triggered_only = yes

    option = {
        name = PHI.14.a
    }
}
country_event = {
    id = PHI.15
    title = PHI.15.t
    desc = PHI.15.d
    picture = GFX_report_event_hitler_handshake

    is_triggered_only = yes

    option = {
        name = PHI.15.a
    }
}

country_event = {
    id = PHI.16
    title = PHI.16.t
    desc = PHI.16.d
    picture = GFX_report_event_hitler_handshake

    is_triggered_only = yes

    option = {
        name = PHI.16.a
    }
}

# Cavite Protests
country_event = {
    id = PHI.33
    title = PHI.33.t
    desc = PHI.33.d
    picture = GFX_report_event_generic_riot

    is_triggered_only = yes

    option = {
        name = PHI.33.a
        add_political_power = 50
        add_stability = 0.05
        hidden_effect = {
            add_popularity = {
                ideology = national_populist
                popularity = 0.05
            }
        }
        custom_effect_tooltip = PHI_aguinaldo_free
    }

    option = {
        name = PHI.33.b
        add_political_power = -50
        hidden_effect = {
            PHI = { country_event = { id = PHI.34   days = 5 } }
        }
    }
}

# Widespread Protests
country_event = {
    id = PHI.34
    title = PHI.34.t
    desc = PHI.34.d
    picture = GFX_report_event_generic_riot

    is_triggered_only = yes

    option = {
        name = PHI.34.a
        add_political_power = 50
        custom_effect_tooltip = PHI_aguinaldo_free
    }

    option = {
        name = PHI.34.b

        hidden_effect = {
            PHI = { country_event = { id = PHI.35   days = 14 } }
        }
        add_political_power = -50
    }
}

# Fascist Uprising
country_event = {
    id = PHI.35
    title = PHI.35.t
    desc = PHI.35.d
    picture = GFX_report_event_german_italian_plot

    is_triggered_only = yes

    option = {
        name = PHI.35.a
        custom_effect_tooltip = PHI_fascist_plot_success
        hidden_effect = { country_event = { id = PHI.53 days = 3 } }
    }

    option = {
        name = PHI.35.b
        hidden_effect = { country_event = { id = PHI.54 days = 3 } }
    }
}

# Nationalist Plot Succeeded
country_event = {
    id = PHI.53
    title = PHI.53.t
    desc = PHI.53.d
    picture = GFX_report_event_spain_civil_war_volunteers_02

    is_triggered_only = yes

    option = {
        name = PHI.53.a
        hidden_effect = {
            set_country_flag = PHI_AGUINALDO_COUP_SUCCESS
            set_popularities = {
                social_liberal = 4
                social_conservative = 22
                authoritarian_democrat = 12
                paternal_autocrat = 2
                national_populist = 56
            }
            set_politics = {
                ruling_party = national_populist
                elections_allowed = no
            }

            swap_ideas = {
                remove_idea = PHI_Basilio_J_Valdez_HoG_ADE
                add_idea = PHI_Emilio_Aguinaldo_HoG_NAT
            }

            add_ideas = PHI_Ferdinand_Marcos_FOR_SCO
            add_ideas = PHI_Serafin_Fausto_ECO_SCO 

            swap_ideas = {
                remove_idea = PHI_Benigno_Aquino_Sr_SEC_ADE
                add_idea = PHI_Jose_Yulo_SEC_NAT
            }
        }
    }
}

# Nationalist Plot Failed
country_event = {
    id = PHI.54
    title = PHI.54.t
    desc = PHI.54.d
    picture = GFX_report_event_romanian_soldiers

    is_triggered_only = yes

    option = {
        name = PHI.54.a
        custom_effect_tooltip = PHI_fascist_plot_failed
        hidden_effect = {
            set_country_flag = PHI_MILITARY_JUNTA_CONTINUES
            set_popularities = {
                market_liberal = 9
                social_liberal = 22
                social_conservative = 26
                authoritarian_democrat = 43
            }
        }
    }
}