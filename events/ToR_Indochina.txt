# Indochinese Events
# Created by: dax0102

add_namespace = ich

# Intro Event
country_event = {
    id = ich.0
    title = ich.0.t
    desc = ich.0.d
    picture = GFX_report_event_generic_sign_treaty2

    is_triggered_only = yes

    fire_only_once = yes

    option = {
        name = ich.0.a
    }
}

# Elections
country_event = {
    id = ich.1
    title = ich.1.t 
    desc = ich.1.d
    picture = GFX_report_event_election_vote

	trigger = {
		tag = ICH
		date > 1936.8.12
	}
    	
	mean_time_to_happen = {
		days = 0
	}

    # SocDem
    option = {
        name = ich.1.a

        add_popularity = {
            ideology = social_democrat
            popularity = 0.05
        }

        hidden_effect = {
            set_country_flag = ICH_SOC_DEM_VICTORY_FLAG

            country_event = { id = ich.2 days = 14 }
        }
    }

    # SocLib
    option = {
        name = ich.1.b

        set_politics = {
            ruling_party = social_liberal
            elections_allowed = yes
        }

        add_popularity = {
            ideology = social_liberal
            popularity = 0.05
        }

        hidden_effect = {
            set_country_flag = ICH_SOC_LIB_VICTORY_FLAG
        }
    }

    # Commie
    option = {
        name = ich.1.c

        set_politics = {
            ruling_party = orthodox_marxist
            elections_allowed = no
        }

        add_popularity = {
            ideology = orthodox_marxist
            popularity = 0.15
        }

        hidden_effect = {
            set_country_flag = ICH_WORKERS_VICTORY_FLAG

            set_party_name = { 
                ideology = revolutionary_socialist
                name = ICH_revolutionary_socialist_factions
                long_name = ICH_revolutionary_socialist_factions_long
            }
            set_party_name = { 
                ideology = orthodox_marxist
                name = ICH_orthodox_marxist_factions
                long_name = ICH_orthodox_marxist_factions_long
            }
            set_party_name = { 
                ideology = vanguardist
                name = ICH_vanguardist_factions
                long_name = ICH_vanguardist_factions_long
            }

            retire_ideology_leader = vanguardist
            retire_ideology_leader = revolutionary_socialist
        }
    }
}

# Allegations of Elections Fraud
country_event = {
    id = ich.2
    title = ich.2.t
    desc = ich.2.d
    picture = GFX_report_event_communist_leader

    is_triggered_only = yes

    # Let them whine
    option = {
        name = ich.2.a

        add_political_power = -150
        hidden_effect = {
            country_event = { id = ich.3 days = 7 }
        }
    }
}

# Protests
country_event = {
    id = ich.3
    title = ich.3.t
    desc = ich.3.d
    picture = GFX_report_event_worker_protests

    is_triggered_only = yes

    # Send in the security forces
    option = {
        name = ich.3.a

        hidden_effect = {
            country_event = { id = ich.4 days = 21 }
        }
    }
}

# ICP Coup
country_event = {
    id = ich.4
    title = ich.4
    desc = ich.4
    picture = GFX_report_event_german_politician_speech

    is_triggered_only = yes

    # The Army crushed the coup
    option = {
        name = ich.4.a

        hidden_effect = {
            country_event = { id = ich.5 days = 2 }
        }
    }

    # The Army joins the coup
    option = {
        name = ich.4.b

        hidden_effect = {
            country_event = { id = ich.6 days = 2 }
        }
    }
}

# The General's Decisions
country_event = {
    id = ich.5
    title = ich.5.t
    desc = ich.5.d
    picture = GFX_report_event_german_italian_pact

    is_triggered_only = yes

    # Restore Democracy
    option = {
        name = ich.5.a

        add_popularity = {
            ideology = social_democrat
            popularity = 0.05
        }

        add_stability = 0.05
    }

    # Military Dictatorship
    option = {
        name = ich.5.b

        set_politics = {
            ruling_party = authoritarian_democrat
            elections_allowed = no
        }

        add_popularity = {
            ideology = authoritarian_democrat
            popularity = 0.15
        }

        hidden_effect = {
            clr_country_flag = ICH_SOC_DEM_VICTORY_FLAG
            set_country_flag = ICH_ARMY_COUP_FLAG
        }
    }
}

# ICP Triumphant
country_event = {
    id = ich.6
    title = ich.6.t
    desc = ich.6.d
    picture = GFX_report_event_stalin_propaganda
    
    is_triggered_only = yes

    option = {
        name = ich.6.a

        set_politics = {
            ruling_party = orthodox_marxist
            elections_allowed = no
        }

        add_popularity = {
            ideology = orthodox_marxist
            popularity = 0.05
        }

        hidden_effect = {
            clr_country_flag = ICH_SOC_DEM_VICTORY_FLAG
            set_country_flag = ICH_WORKERS_VICTORY_FLAG

            set_party_name = { 
                ideology = revolutionary_socialist
                name = ICH_revolutionary_socialist_factions
                long_name = ICH_revolutionary_socialist_factions_long
            }
            set_party_name = { 
                ideology = orthodox_marxist
                name = ICH_orthodox_marxist_factions
                long_name = ICH_orthodox_marxist_factions_long
            }
            set_party_name = { 
                ideology = vanguardist
                name = ICH_vanguardist_factions
                long_name = ICH_vanguardist_factions_long
            }

            retire_ideology_leader = vanguardist
            retire_ideology_leader = revolutionary_socialist
        }
    }
}

# The First Congress
country_event = {
    id = ich.7
    title = ich.7.t
    desc = ich.7.d
    picture = GFX_report_event_fascist_gathering

    is_triggered_only = yes

    option = {
        name = ich.7.a

        hidden_effect = {
            country_event = { id = ich.8 days = 21 }
        }
    }
}

# The New Premier
country_event = {
    id = ich.8
    title = ich.8.t
    desc = ich.8.d
    picture = GFX_report_event_fascist_speech

    is_triggered_only = yes

    option = {
        name = ich.8.a

        set_politics = {
            ruling_party = orthodox_marxist
            elections_allowed = no
        }

        add_popularity = {
            ideology = orthodox_marxist
            popularity = 0.15
        }

        hidden_effect = {
            set_country_flag = ICH_MARXIST_POLICY_FLAG
        }
    }

    option = {
        name = ich.8.b

        set_politics = {
            ruling_party = revolutionary_socialist
            elections_allowed = no
        }

        add_popularity = {
            ideology = revolutionary_socialist
            popularity = 0.15
        }

        hidden_effect = {
            set_country_flag = ICH_SOCIALIST_POLICY_FLAG
        }
    }

    option = {
        name = ich.8.c

        set_politics = {
            ruling_party = vanguardist
            popularity = 0.15
        }

        add_popularity = {
            ideology = vanguardist
            popularity = 0.15
        }

        hidden_effect = {
            set_country_flag = ICH_VANGUARDIST_POLICY_FLAG
        }
    }
}

# Indochina in the Internationale
country_event = {
    id = ich.9
    title = ich.9.t
    desc = ich.9.d
    picture = GFX_report_event_generic_sign_treaty2

    is_triggered_only = yes

    option = {
        name = ich.9.a
        FRA = {
            add_to_faction = PREV
        }
    }

    option = {
        name = ich.9.b

        PREV = { 
            country_event = { id = ich.10 days = 1 } 
        }
    }
}

# France Rejects
country_event = {
    id = ich.10
    title = ich.10.t
    desc = ich.10.d
    picture = GFX_report_event_generic_sign_treaty2

    is_triggered_only = yes

    option = {
        name = ich.10.a
    }
}

# Indochinese Destablization Plot
country_event = {
    id = ich.11
    title = ich.11.t
    desc = ich.11.d
    picture = GFX_report_event_generic_sign_treaty2

    is_triggered_only = yes

    option = {
        name = ich.11.a
        add_political_power = -100
    }

    option = {
        name = ich.11.b
        create_wargoal = {
            type = puppet
            target = ICH
        }
    }
}