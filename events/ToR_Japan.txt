# Japanese events
# created by: dax0102

add_namespace = jap

# Intro Event
country_event = {
    id = jap.0
    title = jap.0.t
    desc = jap.0.d

    is_triggered_only = yes

    option = {
        name = jap.0.a
    }
}

# Resignation of Prime Minister Inukai
country_event = {
    id = jap.1
    title = jap.1.t
    desc = jap.1.d
    picture = GFX_report_event_asian_politicians

    trigger = {
        tag = JAP
        date = 1936.3.17
    }

    mean_time_to_happen = {
        days = 2
    }

    fire_only_once = yes

    # Enjoy your retirement, Prime Minister
    option = {
        name = jap.1.a

        remove_ideas_with_trait = head_of_government
        add_ideas = JAP_Mitsuchi_Chuzo_hog_sco
    }
}

# Prepare to Review the Budget
country_event = {
    id = jap.2
    title = jap.2.t
    desc = jap.2.d
    picture = GFX_report_event_generic_read_write

    trigger = {
        tag = JAP
        date = 1936.4.5
    }

    mean_time_to_happen = {
        days = 2
    }

    fire_only_once = yes

    # Fine
    option = {
        name = jap.2.a
        add_political_power = 50

        hidden_effect = {
            country_event = { id = jap.3 days = 14 }
        }
    }
}

# Start of the Review
country_event = {
    id = jap.3
    title = jap.3.t
    desc = jap.3.d
    picture = GFX_report_event_japanese_reply

    is_triggered_only = yes

    immediate = {
        set_country_flag = JAP_START_OF_THE_REVIEW
    }

    # Let's get this over with
    option = {
        name = jap.3.a

        hidden_effect = { country_event = { id = jap.4 days = 7 } }
    }
}

# Budget Prioritization
country_event = {
    id = jap.4
    title = jap.4.t
    desc = jap.4.d
    picture = GFX_report_event_china_ledo_road

    immediate = {
        set_variable = { var = jap_army_var value = 1 }
        set_variable = { var = jap_navy_var value = 1 }
    }

    is_triggered_only = yes

    # Equal
    option = {
        name = jap.4.a
        
        add_political_power = 100
        set_country_flag = JAP_ELECTIONS_CONTINUES
    }

    # Army
    option = {
        name = jap.4.b
        army_experience = 5

        add_to_variable = {
            var = jap_army_var
            value = 5
        }
        hidden_effect = { country_event = { id = jap.5 days = 14 } }
    }

    # Navy
    option = {
        name = jap.4.c
        ai_chance = {
            factor = 100

            modifier = {
                factor = 2
                has_country_flag = JAP_FAVOUR_THE_NAVY
            }
        }

        navy_experience = 5

        add_to_variable = {
            var = jap_navy_var
            value = 5
        }
        hidden_effect = { country_event = { id = jap.5 days = 14 } }
    }
}

# Imported Resource Prioritization
country_event = {
    id = jap.5
    title = jap.5.t
    desc = jap.5.d
    picture = GFX_report_event_physics_lab_01

    is_triggered_only = yes

    # The Army
    option = {
        name = jap.5.a

        add_to_variable = {
            var = jap_army_var
            value = 2
        }
        hidden_effect = { 
            country_event = { id = jap.6 days = 14 }
            if = {
                limit = { check_var = { jap_army_var > jap_navy_var } }
                country_event = { id = jap.12 days = 3 }
            }
        }
    }

    # The Navy
    option = {
        name = jap.5.b
        ai_chance = {
            factor = 100

            modifier = {
                factor = 20
                has_country_flag = JAP_FAVOUR_THE_NAVY
            }
        }

        add_to_variable = {
            var = jap_navy_var
            value = 2
        }
        hidden_effect = {
            country_event = { id = jap.6 days = 14 }
            if = {
                limit = { check_var = { jap_navy_var > jap_army_var }}
                country_event = { id = jap.11 days = 3 }
            }
        }
    }
}

# Research Prioritization
country_event = {
    id = jap.6
    title = jap.6.t
    desc = jap.6.d
    picture = GFX_report_event_physics_lab_02

    is_triggered_only = yes

    # The Army
    option = {
        name = jap.6.a
        ai_chance = {
            factor = 20

            modifier = {
                factor = 20
                has_country_flag = JAP_FAVOUR_THE_NAVY
            }
        }

        set_country_flag = JAP_BUDGET_REVIEW_OVER
        add_to_variable = {
            var = jap_army_var
            value = 1
        }
    }

    # The Navy
    option = {
        name = jap.6.b

        set_country_flag = JAP_BUDGET_REVIEW_OVER
        add_to_variable = {
            var = jap_navy_var
            value = 1
        }
    }
}

# The Army Coup
country_event = {
    id = jap.7
    title = jap.7.t
    desc = jap.7.d
    picture = GFX_report_event_czech_soldiers_01

    trigger = {
        tag = JAP
        has_country_flag = JAP_BUDGET_REVIEW_OVER
        check_variable = { jap_navy_var > jap_army_var }
    }

    mean_time_to_happen = {
        days = 30
    }

    fire_only_once = yes

    # Banzai
    option = {
        name = jap.7.a

        set_politics = {
            ruling_party = authoritarian_democrat
            elections_allowed = no
        }

        hidden_effect = {
            set_country_flag = JAP_ARMY_COUP
            add_popularity = {
                ideology = authoritarian_democrat
                popularity = 0.15
            }
            
            remove_all_ministers = yes
            add_ideas = {
                JAP_Adachi_Kenzo_hog_ade
                JAP_Arita_Hachiro_for_ade
                JAP_Nakajima_Chikuhei_eco_ade
                JAP_Mochizuki_Keisuke_sec_ade
            }

            country_event = { id = jap.10 days = 7 }
        }
    }
}

# The Navy Coup
country_event = {
    id = jap.8
    title = jap.8.t
    desc = jap.8.d
    picture = GFX_report_event_czech_soldiers_01

    trigger = {
        tag = JAP
        has_country_flag = JAP_BUDGET_REVIEW_OVER
        check_variable = { jap_navy_var < jap_army_var }
    }

    mean_time_to_happen = {
        days = 30
    }

    fire_only_once = yes

    # Banzai!
    option = {
        name = jap.8.a

        set_politics = {
            ruling_party = paternal_autocrat
            elections_allowed = no
        }

        hidden_effect = {
            set_country_flag = JAP_NAVY_COUP
            add_popularity = {
                ideology = paternal_autocrat
                popularity = 0.15
            }

            remove_all_ministers = yes
            add_ideas = {
                JAP_Nagata_Tetsuzan_hog_pau
                JAP_Tatekawa_Yoshitsugu_for_pau
                JAP_Shoda_Kazue_eco_pau
                JAP_Shiono_Suehiko_sec_pau
            }

            country_event = { id = jap.10 days = 7 }
        }
    }
}

# The Japanese Elections
country_event = {
    id = jap.9
    title = jap.9.t
    desc = jap.9.d
    picture = GFX_report_event_election_vote

    trigger = {
        tag = JAP
        OR = {
            has_country_flag = JAP_ELECTIONS_CONTINUES
            check_variable = { jap_army_var = jap_navy_var }
        }
    }

    mean_time_to_happen = {
        days = 180
    }

    immediate = {
        set_country_flag = JAP_DEMOCRACY_SURVIVED
        set_country_flag = JAP_BUDGET_REVIEW_OVER
    }

    # Seiyukai
    option = {
        name = jap.9.a

        set_politics = {
            ruling_party = social_conservative
            elections_allowed = no
        }

        hidden_effect = {
            add_popularity = {
                ideology = social_conservative
                popularity = 0.1
            }

            country_event = { id = jap.10 days = 7 }
        }
    }

    # Minseito
    option = {
        name = jap.9.b

        set_politics = {
            ruling_party = classic_liberal
            elections_allowed = no
        }

        hidden_effect = {
            add_popularity = {
                ideology = classic_liberal
                popularity = 0.1
            }

            remove_all_ministers = yes
            add_ideas = {
                JAP_Ugaki_Kazushige_hog_cli
                JAP_Shidehara_Kijuro_for_cli
                JAP_Inoue_Junnosuke_eco_cli
                JAP_Kawasaki_Katsu_sec_cli
            }

            country_event = { id = jap.10 days = 7 }
        }
    }

    # Minshuto
    option = {
        name = jap.9.c

        set_politics = {
            ruling_party = social_democrat
            elections_allowed = no
        }

        hidden_effect = {
            add_popularity = {
                ideology = social_democrat
                popularity = 0.15
            }

            remove_all_ministers = yes
            add_ideas = {
                JAP_Katayama_Tetsu_hog_sde
                JAP_Katayama_Tetsu_for_sde
                JAP_Eda_Saburo_eco_sde
                JAP_Matsuoka_Komakichi_sec_sde
            }

            country_event = { id = jap.10 days = 7 }
        }
    }
}

# New Era for Japan
country_event = {
    id = jap.10
    title = jap.10.t
    desc = jap.10.d
    picture = GFX_report_event_japanese_reply

    is_triggered_only = yes

    option = {
        name = jap.10.a

        add_stability = 0.05
    }
}

# Army Officers Left in Protest!
country_event = {
    id = jap.11
    title = jap.11.t
    desc = jap.11.d
    picture = GFX_report_event_german_advisors_remain

    is_triggered_only = yes

    option = {
        name = jap.11.a
        army_experience = -5
    }
}

# Navy Officers Left in Protest!
country_event = {
    id = jap.12
    title = jap.12.t
    desc = jap.12.d
    picture = GFX_report_event_german_advisors_remain

    is_triggered_only = yes

    option = {
        name = jap.12.a
        navy_experience = -5
    }
}

# Invitation
country_event = {
    id = jap.13
    title = jap.13.t
    desc = jap.13.d
    picture = GFX_report_event_generic_read_write

    is_triggered_only = yes

    option = {
        name = jap.13.a

        JAP = { country_event = jap.14 }
    }

    option = {
        name = jap.13.b

        JAP = { country_event = jap.15 }
    }
}

# Invitation Acceptance
country_event = {
    id = jap.14
    title = jap.14.t
    desc = jap.14.d
    picture = GFX_report_event_generic_read_write

    is_triggered_only = yes

    option = {
        name = jap.14.a

        add_to_faction = FROM
    }
}

# Invitation Rejection
country_event = {
    id = jap.15
    title = jap.15.t
    desc = jap.15.d
    picture = GFX_report_event_generic_read_write

    is_triggered_only = yes

    option = {
        name = jap.15.a

        create_wargoal = {
            target = FROM
            type = puppet
        }
        add_ai_strategy = {
            type = conquer
            id = FROM
            value = 500
        }
    }

    option = {
        name = jap.15.b

        add_political_power = -100
    }
}

# Russian Treaty
country_event = {
    id = jap.16
    title = jap.16.t
    desc = jap.16.d
    picture = GFX_report_event_chinese_japanese_handshake

    is_triggered_only = yes

    option = {
        name = jap.16.a

        JAP = { country_event = jap.17 }
    }

    option = {
        name = jap.16.b

        JAP = { country_event = jap.18 }
    }
}

# Russia Accept
country_event = {
    id = jap.17
    title = jap.17.t
    desc = jap.17.d
    picture = GFX_report_event_japanese_siam_politicians

    is_triggered_only = yes

    option = {
        name = jap.17.a

        diplomatic_relation = {
            country = RUS
            relation = non_aggression_pact
            active = yes
        }
    }
}

# Russia Rejects
country_event = {
    id = jap.18
    title = jap.18.t
    desc = jap.18.d
    picture = GFX_report_event_japanese_officers

    is_triggered_only = yes

    option = {
        name = jap.18.a

        add_opinion_modifier = {
            target = RUS
            modifier = JAP_refused_detente
        }
    }
}

# Rebellion in the Colonies
country_event = {
    id = jap.19
    title = jap.19.t
    desc = jap.19.d
    picture = GFX_report_event_french_resistance_01

    is_triggered_only = yes

    option = {
        name = jap.19.a

        if = {
            limit = { THIS = { tag = ENG } }
            release = MAL
            declare_war_on = {
                target = MAL
                type = annex_everything
            }
            add_ai_strategy = {
                type = conquer
                id = "MAL"
                value = 2000
            }
        }
        if = {
            limit = { THIS = { tag = HOL } }
            end_puppet = INS
            declare_war_on = {
                target = INS
                type = annex_everything
            }
            add_ai_strategy = {
                type = conquer
                id = "INS"
                value = 2000
            }
        }
        
        JAP = { country_event = jap.20 }
    }
}

# Rebellion Success
country_event = {
    id = jap.20
    title = jap.20.t
    desc = jap.20.d
    picture = GFX_report_event_french_resistance_01

    is_triggered_only = yes

    option = {
        name = jap.20.a

        if = {
            limit = { country_exits = MAL }
            add_ai_strategy = {
                type = befriend
                id = "MAL"
                value = 100
            }
        }

        if = {
            limit = { INS = { is_subject = no } }
            add_ai_strategy = {
                type = befriend
                id = "INS"
                value = 100
            }
        }
    }
}

# Rebellion Failed
country_event = {
    id = jap.21
    title = jap.21.t
    desc = jap.21.d
    picture = GFX_report_event_french_resistance_01

    is_triggered_only = yes

    option = {
        name = jap.21.a
        add_political_power = -25
    }
}