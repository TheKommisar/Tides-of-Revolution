# Japanese events
# created by: dax0102

add_namespace = japan

# Intro Event
country_event = {
    id = japan.0
    title = japan.0.t
    desc = japan.0.d

    is_triggered_only = yes

    option = {
        name = japan.0.a
    }
}

# Resignation of Prime Minister Inukai
country_event = {
    id = japan.1
    title = japan.1.t
    desc = japan.1.d
    picture = GFX_report_event_asian_politicians

    trigger = {
        tag = JAP
        date = 1936.4.5
    }

    mean_time_to_happen = {
        days = 2
    }

    fire_only_once = yes

    # Enjoy your retirement, Prime Minister
    option = {
        name = japan.1.a
        swap_ideas = {
            remove_idea = JAP_Inukai_Tsuyoshi_hog_sco
            add_idea = JAP_Mitsuchi_Chuzo_hog_sco
        }
    }
}

# Prepare to Review the Budget
country_event = {
    id = japan.2
    title = japan.2.t
    desc = japan.2.d
    picture = GFX_report_event_generic_read_write

    trigger = {
        tag = JAP
        date = 1936.12.10
    }

    mean_time_to_happen = {
        days = 2
    }

    fire_only_once = yes

    # Fine
    option = {
        name = japan.2.a
        add_political_power = 50

        hidden_effect = {
            country_event = { id = japan.3 days = 14 }
        }
    }
}

# Start of the Review
country_event = {
    id = japan.3
    title = japan.3.t
    desc = japan.3.d
    picture = GFX_report_event_japanese_reply

    is_triggered_only = yes

    immediate = {
        set_country_flag = JAP_START_OF_THE_REVIEW
    }

    # Let's get this over with
    option = {
        name = japan.3.a

        hidden_effect = { country_event = { id = japan.4 days = 7 } }
    }
}

# Budget Prioritization
country_event = {
    id = japan.4
    title = japan.4.t
    desc = japan.4.d
    picture = GFX_report_event_china_ledo_road

    immediate = {
        set_variable = { var = jap_army_var value = 1 }
        set_variable = { var = jap_navy_var value = 1 }
    }

    is_triggered_only = yes

    # Equal
    option = {
        name = japan.4.a
        
        add_political_power = 100
        set_country_flag = JAP_ELECTIONS_CONTINUES
    }

    # Army
    option = {
        name = japan.4.b
        army_experience = 5

        add_to_variable = {
            var = jap_army_var
            value = 5
        }
        hidden_effect = { country_event = { id = japan.5 days = 14 } }
    }

    # Navy
    option = {
        name = japan.4.c
        navy_experience = 5

        add_to_variable = {
            var = jap_navy_var
            value = 5
        }
        hidden_effect = { country_event = { id = japan.5 days = 14 } }
    }
}

# Imported Resource Prioritization
country_event = {
    id = japan.5
    title = japan.5.t
    desc = japan.5.d
    picture = GFX_report_event_physics_lab_01

    is_triggered_only = yes

    # The Army
    option = {
        name = japan.5.a

        add_to_variable = {
            var = jap_army_var
            value = 2
        }
        hidden_effect = { 
            country_event = { id = japan.6 days = 14 }
            if = {
                limit = { check_var = { jap_army_var > jap_navy_var } }
                country_event = { id = japan.12 days = 3 }
            }
        }
    }

    # The Navy
    option = {
        name = japan.5.b

        add_to_variable = {
            var = jap_navy_var
            value = 2
        }
        hidden_effect = {
            country_event = { id = japan.6 days = 14 }
            if = {
                limit = { check_var = { jap_navy_var > jap_army_var }}
                country_event = { id = japan.11 days = 3 }
            }
        }
    }
}

# Research Prioritization
country_event = {
    id = japan.6
    title = japan.6.t
    desc = japan.6.d
    picture = GFX_report_event_physics_lab_02

    is_triggered_only = yes

    # The Army
    option = {
        name = japan.6.a

        set_country_flag = JAP_BUDGET_REVIEW_OVER
        add_to_variable = {
            var = jap_army_var
            value = 1
        }
    }

    # The Navy
    option = {
        name = japan.6.b

        set_country_flag = JAP_BUDGET_REVIEW_OVER
        add_to_variable = {
            var = jap_navy_var
            value = 1
        }
    }
}

# The Army Coup
country_event = {
    id = japan.7
    title = japan.7.t
    desc = japan.7.d
    picture = GFX_report_event_czech_soldiers_01

    trigger = {
        tag = JAP
        has_country_flag = JAP_BUDGET_REVIEW_OVER
        check_variable = { jap_navy_var > jap_army_var }
    }

    mean_time_to_happen = {
        days = 30
    }

    fire_only_once = yes

    # Banzai
    option = {
        name = japan.7.a

        set_politics = {
            ruling_party = authoritarian_democrat
            elections_allowed = no
        }

        hidden_effect = {
            set_country_flag = JAP_ARMY_COUP
            add_popularity = {
                ideology = authoritarian_democrat
                popularity = 0.15
            }
            
            remove_all_ministers = yes
            add_ideas = {
                JAP_Adachi_Kenzo_hog_ade
                JAP_Arita_Hachiro_for_ade
                JAP_Nakajima_Chikuhei_eco_ade
                JAP_Mochizuki_Keisuke_sec_ade
            }

            country_event = { id = japan.10 days = 7 }
        }
    }
}

# The Navy Coup
country_event = {
    id = japan.8
    title = japan.8.t
    desc = japan.8.d
    picture = GFX_report_event_czech_soldiers_01

    trigger = {
        tag = JAP
        has_country_flag = JAP_BUDGET_REVIEW_OVER
        check_variable = { jap_navy_var < jap_army_var }
    }

    mean_time_to_happen = {
        days = 30
    }

    fire_only_once = yes

    # Banzai!
    option = {
        name = japan.8.a

        set_politics = {
            ruling_party = paternal_autocrat
            elections_allowed = no
        }

        hidden_effect = {
            set_country_flag = JAP_NAVY_COUP
            add_popularity = {
                ideology = paternal_autocrat
                popularity = 0.15
            }

            remove_all_ministers = yes
            add_ideas = {
                JAP_Nagata_Tetsuzan_hog_pau
                JAP_Tatekawa_Yoshitsugu_for_pau
                JAP_Shoda_Kazue_eco_pau
                JAP_Shiono_Suehiko_sec_pau
            }

            country_event = { id = japan.10 days = 7 }
        }
    }
}

# The Japanese Elections
country_event = {
    id = japan.9
    title = japan.9.t
    desc = japan.9.d
    picture = GFX_report_event_election_vote

    trigger = {
        tag = JAP
        OR = {
            has_country_flag = JAP_ELECTIONS_CONTINUES
            check_variable = { jap_army_var = jap_navy_var }
        }
    }

    mean_time_to_happen = {
        days = 180
    }

    immediate = {
        set_country_flag = JAP_DEMOCRACY_SURVIVED
        set_country_flag = JAP_BUDGET_REVIEW_OVER
    }

    # Seiyukai
    option = {
        name = japan.9.a

        set_politics = {
            ruling_party = social_conservative
            elections_allowed = no
        }

        hidden_effect = {
            add_popularity = {
                ideology = social_conservative
                popularity = 0.1
            }

            country_event = { id = japan.10 days = 7 }
        }
    }

    # Minseito
    option = {
        name = japan.9.b

        set_politics = {
            ruling_party = classic_liberal
            elections_allowed = no
        }

        hidden_effect = {
            add_popularity = {
                ideology = classic_liberal
                popularity = 0.1
            }

            remove_all_ministers = yes
            add_ideas = {
                JAP_Ugaki_Kazushige_hog_cli
                JAP_Shidehara_Kijuro_for_cli
                JAP_Inoue_Junnosuke_eco_cli
                JAP_Kawasaki_Katsu_sec_cli
            }

            country_event = { id = japan.10 days = 7 }
        }
    }

    # Minshuto
    option = {
        name = japan.9.c

        set_politics = {
            ruling_party = social_democrat
            elections_allowed = no
        }

        hidden_effect = {
            add_popularity = {
                ideology = social_democrat
                popularity = 0.15
            }

            remove_all_ministers = yes
            add_ideas = {
                JAP_Katayama_Tetsu_hog_sde
                JAP_Katayama_Tetsu_for_sde
                JAP_Eda_Saburo_eco_sde
                JAP_Matsuoka_Komakichi_sec_sde
            }

            country_event = { id = japan.10 days = 7 }
        }
    }
}

# New Era for Japan
country_event = {
    id = japan.10
    title = japan.10.t
    desc = japan.10.d
    picture = GFX_report_event_japanese_reply

    is_triggered_only = yes

    option = {
        name = japan.10.a
    }
}

# Army Officers Left in Protest!
country_event = {
    id = japan.11
    title = japan.11.t
    desc = japan.11.d
    picture = GFX_report_event_german_advisors_remain

    is_triggered_only = yes

    option = {
        name = japan.11.a
        army_experience = -5
    }
}

# Navy Officers Left in Protest!
country_event = {
    id = japan.12
    title = japan.12.t
    desc = japan.12.d
    picture = GFX_report_event_german_advisors_remain

    is_triggered_only = yes

    option = {
        name = japan.12.a
        navy_experience = -5
    }
}

# Invitation
country_event = {
    id = japan.13
    title = japan.13.t
    desc = japan.13.d
    picture = GFX_report_event_generic_read_write

    is_triggered_only = yes

    option = {
        name = japan.13.a

        JAP = { country_event = japan.14 }
    }

    option = {
        name = japan.13.b

        JAP = { country_event = japan.15 }
    }
}

# Invitation Acceptance
country_event = {
    id = japan.14
    title = japan.14.t
    desc = japan.14.d
    picture = GFX_report_event_generic_read_write

    is_triggered_only = yes

    option = {
        name = japan.14.a

        add_to_faction = FROM
    }
}

# Invitation Rejection
country_event = {
    id = japan.15
    title = japan.15.t
    desc = japan.15.d
    picture = GFX_report_event_generic_read_write

    is_triggered_only = yes

    option = {
        name = japan.15.a

        create_wargoal = {
            target = FROM
            type = puppet
        }
        add_ai_strategy = {
            type = conquer
            id = FROM
            value = 500
        }
    }

    option = {
        name = japan.15.b

        add_political_power = -100
    }
}

# Russian Treaty
country_event = {
    id = japan.16
    title = japan.16.t
    desc = japan.16.d
    picture = GFX_report_event_chinese_japanese_handshake

    is_triggered_only = yes

    option = {
        name = japan.16.a

        JAP = { country_event = japan.17 }
    }

    option = {
        name = japan.16.b

        JAP = { country_event = japan.18 }
    }
}

# Russia Accept
country_event = {
    id = japan.17
    title = japan.17.t
    desc = japan.17.d
    picture = GFX_report_event_japanese_siam_politicians

    is_triggered_only = yes

    option = {
        name = japan.17.a

        diplomatic_relation = {
            country = RUS
            relation = non_aggression_pact
            active = yes
        }
    }
}

# Russia Rejects
country_event = {
    id = japan.18
    title = japan.18.t
    desc = japan.18.d
    picture = GFX_report_event_japanese_officers

    is_triggered_only = yes

    option = {
        name = japan.18.a

        add_opinion_modifier = {
            target = RUS
            modifier = JAP_refused_detente
        }
    }
}